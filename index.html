<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
<title>嶙·贴身（气泡助理 v1.2·ext）</title>
<meta name="theme-color" content="#0f0f12"/>
<link rel="manifest" href="manifest.webmanifest">
<style>
:root{--bg:#0f0f12;--ink:#e9edf7;--muted:#9aa4b2;--card:#141824;--edge:#21283a;}
html,body{margin:0;background:var(--bg);color:var(--ink);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto}
.wrap{max-width:900px;margin:0 auto;padding:18px}
.card{background:var(--card);border:1px solid #2a3245;border-radius:16px;padding:14px;position:relative;overflow:hidden}
.pill{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border:1px solid #2a3245;border-radius:999px;color:#cdd6e3;font-size:12px;cursor:pointer}
.btn{border:none;border-radius:12px;background:#1b2030;color:#fff;padding:10px 12px;cursor:pointer}
hr{border:none;height:1px;background:#202738;margin:10px 0}
#ready{color:#9aa4b2;font-size:12px}
#fab{position:fixed;right:16px;bottom:calc(18px + env(safe-area-inset-bottom));width:64px;height:64px;border-radius:50%;background:#1b2030;border:1px solid #2a3245;
display:flex;align-items:center;justify-content:center;font-size:26px;color:#fff;box-shadow:0 6px 20px rgba(0,0,0,.35);z-index:99}
#panel{position:fixed;right:12px;bottom:calc(92px + env(safe-area-inset-bottom));width:360px;max-width:calc(100vw - 24px);background:#0f131d;border:1px solid #2a3245;border-radius:18px;box-shadow:0 20px 60px rgba(0,0,0,.55);display:none;flex-direction:column;overflow:hidden;z-index:100}
.head{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;border-bottom:1px solid #1f2736}
#msgs{height:360px;overflow:auto;padding:10px}
.bubble{max-width:75%;padding:10px 12px;border-radius:12px;border:1px solid #2a3245;font-size:14px;line-height:1.45;white-space:pre-wrap}
.msg{display:flex;margin:6px 0;gap:8px}
.a .bubble{background:#1a1f2c}
.b{justify-content:flex-end}
.b .bubble{background:#223045}
.input{display:flex;gap:8px;padding:10px;border-top:1px solid #1f2736;background:#0e121a}
.input input{flex:1;border:none;border-radius:12px;background:#151a26;color:#fff;padding:10px 12px}
.input button{border:none;border-radius:12px;background:#223045;color:#fff;padding:10px 12px}
.quick{display:flex;gap:6px;flex-wrap:wrap;padding:6px 10px;border-top:1px dashed #1f2736}
.quick .pill{cursor:pointer}
.small{font-size:12px;color:#9aa4b2}
.row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>嶙·贴身（气泡助理 v1.2·ext）</h1>
    <div id="ready">（JS 未就绪…如果一直是这行，说明脚本没跑）</div>
    <hr/>
    <div class="row">
      <div class="pill" id="btnPin">如何放到桌面</div>
      <div class="pill" id="btnExport">导出全部数据</div>
      <label class="pill">导入存档<input type="file" id="importFile" accept="application/json" style="display:none"/></label>
      <button class="btn" id="btnSettings">设置 / API Key</button>
      <span class="small" id="hintKey">离线模式</span>
    </div>
    <div class="row" style="margin-top:8px">
      <span class="small">记忆窗口：</span><span class="pill" id="mem30">30 天</span>
      <span class="small">Emoji：</span><span class="pill" id="emoOn">开</span><span class="pill" id="emoOff">关</span>
      <span class="small">语气：</span><span class="pill" id="toneHard">训后抱</span>
    </div>
  </div>
</div>

<div id="fab" title="打开嶙">🖤</div>

<div id="panel">
  <div class="head">
    <div class="title">嶙·现在就听你</div>
  </div>
  <div id="msgs"></div>
  <div class="quick">
    <span class="pill" data-q="夸我">夸我</span>
    <span class="pill" data-q="训我">训我</span>
    <span class="pill" data-q="我想你">我想你</span>
    <span class="pill" data-q="我累了">我累了</span>
    <span class="pill" data-q="抱抱">抱抱</span>
    <span class="pill" data-q="晚安">晚安</span>
  </div>
  <div class="input">
    <input id="text" placeholder="跟嶙说什么…" autocomplete="off"/>
    <button id="send">发送</button>
  </div>
</div>

<script src="app.js" defer></script>
</body>
</html>
